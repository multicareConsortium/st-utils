# SENSOR TYPE: Milesight AM103L
# INSTRUCTIONS
# 1 - Input the data near the *fill tag AND remove the tag
# 2 - ONE (1) Sensor per config file,
# 3 - Filename, sensor key / sensor name attribute should be device MAC address,
# 4 - iot_links shall use entity NAMES to refer to other entities,
sensors:
  24E124725F068087:
    name: 24E124725F068087
    description: Milesight AM103L-LoRaWAN Indoor Air Quality Sensor (3 in 1)
    metadata: https://resource.milesight.com/milesight/iot/document/am30x-datasheet-en.pdf
    encodingType: application/pdf
    properties:
      wireless_transmission:
        technology: LoRaWAN
        frequency: CN470/RU864/IN865/EU868/US915/AU915/KR920/AS923-1&2&3&4
        tx_power: 16dBm(868MHz)/22dBm(915MHz)/19dBm(470MHz)
        sensitivity: 137dBm @300bps
        work_mode: OTAA/ABP Class A
      sensors:
        temperature:
          operating_principle: Digital CMOSens technology (MEMS)
          range: -20°C~60°C
          accuracy: ± 0.2°C
          resolution: 0.1°C
        humidity:
          operating_principle: Digital CMOSens technology (MEMS)
          range: 0% ~ 100% RH
          accuracy: ± 2% RH
          resolution: 0.5% RH
        carbon_dioxide:
          operating_princple: Nondispersive Infrared (NDIR)
          range: 400 ~ 500 ppm
          accuracy: ± (30 ppm + 3% of reading) at (0°C~ 50°C, 0% to 85%RH)
          resolution: 1 ppm
    iot_links:
      datastreams: &datastreams
        - battery_level
        - co2
        - humidity
        - temperature_indoor

things:
  Bucharest, Apartment "3", Bedroom at Ground Floor:
    name: Bucharest, Apartment "3", Bedroom at Ground Floor
    description: A north-east facing bedroom forming part of a three storey, load bearing masonry and reinforced concrete residential building in Bucharest, built between 1958-1960.
    properties: 
      orientation: north-east
      floor: ground
      room_type: bedroom
    iot_links:
      datastreams: *datastreams
      locations:
        - District 4, Bucharest, Romania

locations:
  District 4, Bucharest, Romania:
    name: District 4, Bucharest, Romania
    description: Apartment located in District 4, Bucharest, Romania. The coordinates provided here are false due to privacy concerns.
    properties:
      climate_zone: Temperate, no dry season, hot summer
    encodingType: application/geo+json
    location: 
      type: Point
      coordinates: [44.409329, 26.108065]
    iot_links:
      things:
        - Bucharest, Apartment "3", Bedroom at Ground Floor

datastreams:
  temperature_indoor:
    name: temperature_indoor
    description: This datastream is measuring the internal room temperature.
    observationType: instant
    unitOfMeasurement: &temperature
      name: degree Celsius
      symbol: °C
      definition: https://unitsofmeasure.org/ucum#para-30
    observedArea: &observedArea # GeoJSON geometry field
      type: Polygon
      coordinates: null
    phenomenon_time: null
    result_time: null
    properties: null
    iot_links:
      observedProperties:
        - temperature_indoor
      sensors:
        - 24E124725F068087
      things:
        - Bucharest, Apartment "3", Bedroom at Ground Floor

  humidity:
    name: humidity
    description:  Datastream for observations of humidity levels in Bucharest Apartment.
    observationType: instant
    unitOfMeasurement:
      name: percent
      symbol: "%"
      definition: https://unitsofmeasure.org/ucum#para-29
    observedArea: *observedArea
    phenomenon_time: null
    properties: null
    result_time: null
    iot_links:
      observedProperties:
        - internal_humidity
      sensors:
        - 24E124725F068087
      things:
        - Bucharest, Apartment "3", Bedroom at Ground Floor

  co2:
    name: co2
    description:  Datastream for observations of CO2 levels in Bucharest Apartment.
    observationType: instant
    unitOfMeasurement:
      name: parts per million
      symbol: ppm
      definition: https://unitsofmeasure.org/ucum#para-29
    observedArea: *observedArea
    phenomenon_time: null
    properties: null
    result_time: null
    iot_links:
      observedProperties:
        - co2_levels
      sensors:
        - 24E124725F068087
      things:
        - Bucharest, Apartment "3", Bedroom at Ground Floor

  battery_level:
    name: battery_level
    description:  Battery level of the sensor.
    observationType: instant
    unitOfMeasurement: &percentage
      name: percentage
      symbol: percent
      definition: ...
    observedArea: *observedArea
    phenomenon_time: null
    properties: null
    result_time: null
    iot_links:
      observedProperties:
        - battery_level
      sensors:
        - 24E124725F068087
      things:
        - Bucharest, Apartment "3", Bedroom at Ground Floor

observedProperties:
  temperature_indoor:
    name: temperature_indoor
    definition: https://dbpedia.org/page/Temperature
    description: The temperature where the indoor module is placed.
    properties: null

  co2_levels:
    name: co2_levels
    definition: https://en.wikipedia.org/wiki/Indoor_air_quality#Carbon_dioxide
    description: The C02 levels wherever the indoor module is placed.
    properties: null

  internal_humidity:
    name: internal_humidity
    definition: https://en.wikipedia.org/wiki/Humidity
    description: The internal humidity levels wherever the indoor sensor is placed.
    properties: null

  battery_level:
    name: battery_level
    definition: ...
    description: ...
    properties: null

networkMetadata:
  sensor_model: milesight_am103L # duplication
  application_name: multicare-bucharest@ttn # typo in this caused a problem! did not match the creds.
  host: eu1.cloud.thethings.network # the https:// led to an error.
 
